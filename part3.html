<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="CA2 Web Dev" />
        <meta name="author" content="Rosana Cardoso Batista Torres" />
        <title>Web Dev CA2</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
        <link href="css/demo.css" rel="stylesheet" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/codemirror.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/codemirror.js"></script>
        <script>
            function reply_click(clicked_object)
                {
                    var sql = clicked_object.getAttribute('data-sql');
                    console.log(sql);
                    editor.setValue(sql);
                }
        </script>
    </head>
    <body>
        <!-- Responsive navbar-->
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div class="container">
                <a class="navbar-brand" href="#">Part 3</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                        <li class="nav-item"><a class="nav-link active" aria-current="page" href="main.html"><b>Home</b></a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Page content-->
        <div class="container">
          <div class="row">
            <div class="col-lg-12 text-center">
                <h1>Web Dev CA 2</h1>
                <p class="lead">Information about Database Employees</p>
                <p>File: employees</p>
            </div>
            <div class="col-lg-2 order-1 mb-3 d-flex flex-column gap-2 mx-auto align-items-stretch">
                <button name="1.1" class="btn btn-success btn-block" data-sql="SELECT COUNT (title) AS num_empGender, gender, dept_name FROM employees INNER JOIN titles ON titles.emp_id = employees.emp_id INNER JOIN dept_emp ON employees.emp_id = dept_emp.emp_id INNER JOIN departments ON departments.dept_id = dept_emp.dept_id WHERE title = 'Manager' GROUP BY dept_name, gender ORDER BY dept_name ASC LIMIT 100" onClick="reply_click(this)">1.1 List the number of male managers and female managers who work for each department. Make sure to display the gender, the number of employees (renamed as num_empGender) and dept_no, ordered by department number in an ascendant order</button>
                <button name="1.2" class="btn btn-success btn-block" data-sql="SELECT e.gender,t.title, AVG (s.salary) AS avg_salary FROM employees e INNER JOIN salaries s ON e.emp_id = s.emp_id INNER JOIN titles t ON e.emp_id = t.emp_id WHERE title = 'Technique Leader' GROUP BY gender LIMIT 100" onClick="reply_click(this)">1.2 List the average salary of males and females employees whose title is "Technique Leader". In your result table should appear, gender, average salary named as avg_salary and title</button>
                <button name="1.3" class="btn btn-success btn-block" data-sql="SELECT COUNT (emp_id) AS Total_Employees FROM salaries WHERE to_date = '9999-01-01' AND salary BETWEEN 90000 AND 90040 LIMIT 100" onClick="reply_click(this)">1.3 The number of employees that have a current salary (i.e., to_date equals to 9999-01-01) between 90000 and 90040</button>
                <button name="1.4" class="btn btn-success btn-block" data-sql="SELECT DISTINCT salaries.emp_id, last_name, first_name, salary FROM salaries INNER JOIN employees ON salaries.emp_id = employees.emp_id WHERE to_date = '9999-01-01' AND salary >90000 GROUP BY last_name, first_name ORDER BY last_name, first_name DESC LIMIT 100" onClick="reply_click(this)">1.4 List all unique employeesâ€™ last and first names (using GROUP BY method) that have a current salary (i.e., to_date equals to 9999-01-01) greater than 90000, outputting both names in descending order (sort by the last name first and then the first name) and also displaying their current salaries (using the INNER JOIN method)</button>
                <button name="1.5" class="btn btn-success btn-block" data-sql="SELECT employees.firstname, employees.lastname, salaries.salary, salaries.from_date,salaries.to_date FROM employees INNER JOIN salaries ON employees.emp_id = salaries.emp_id WHERE employees.emp_id = '10012' LIMIT 100" onClick="reply_click(this)">1.5 First name, last name, all salary dates and related amounts for the employee with employee number 10012</button>
            </div>
            <div class="col-lg-10 order-2">
                <textarea id="commands" class="col-lg-8 order-2 mb-5">

                </textarea>
                <div class="d-grid gap-2 mt-2">
                <button class="btn btn-success" type="button" id="execute">Execute</button>
                    <input type="file" class="form-control" id="dbfile" />
                    <!-- <input type='file' id='dbfile'/> -->
                </div>
                    <div id="error" class="error"></div>
                
                    <pre id="output">Results will be displayed here</pre>
               </div>
            </div>
        </div>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/mode/sql/sql.min.js"></script>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
        <script type="text/javascript" src="js/gui.js"></script>
    </body>
</html>
